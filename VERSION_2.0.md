# 🎉 点滴計算機 Ver.2.0 - R.Y. Group 公式リリース

## ✨ メジャーアップグレード概要

「R.Y. Group公式 Ver.2.0」として大幅にアップグレードされた点滴計算機は、優しく心地よいパステルデザインと高度な機能を兼ね備えた、医療現場のための次世代ツールです。

---

## 🎨 1. デザイン刷新：優しく心地よいUI

### 新配色パレット
- **グレージュ (#F9F8F6)**: 背景色として採用。目に優しく、長時間の使用でも疲れにくい
- **サクラピンク (#FDE2E4)**: アクセントカラー。温かみと安心感を演出
- **ミントグリーン (#E2F0CB)**: サブカラー。清潔感と爽やかさを表現

### デザイン要素
- **角の大幅な丸み化**: すべてのカード・ボタンに `rounded-3xl` を適用
- **グラデーション効果**: ボタンと結果表示に美しいグラデーションを採用
- **柔らかいシャドウ**: 適度な影で立体感を演出
- **優しいボーダー**: 淡い色のボーダーで要素を区切り

### タイポグラフィ
- **フォント**: Noto Sans JP を優先使用
- **ウェイト**: 400（通常）/ 500（中）/ 700（太字）
- **読みやすさ**: 医療現場での瞬時の判読性を重視

---

## 💾 2. マイ・プリセット機能

### 概要
よく使う計算設定を最大5つまで保存・呼び出しが可能になりました。

### 機能詳細

#### 保存できる情報
- 総輸液量 (mL)
- 予定時間（時間・分）
- 滴下セット（20滴/60滴）
- プリセット名（最大20文字）

#### 使い方
1. **保存**: 計算値を入力後、「現在の設定を保存」ボタンをクリック
2. **名前入力**: 「午前中の標準輸液」などわかりやすい名前を入力
3. **確認**: 保存される設定を確認
4. **呼び出し**: 「プリセット一覧」から読み込み

#### 技術仕様
- **ストレージ**: localStorage を使用
- **キー**: `drip-calc-presets`
- **上限**: 5プリセット
- **永続性**: ブラウザのデータが削除されない限り保持

---

## ⏰ 3. マルチタイマー機能

### 概要
複数の点滴終了時間を同時管理し、プッシュ通知で終了を知らせます。

### 主な機能

#### 複数タイマー管理
- 複数の患者様の点滴終了時刻を一元管理
- タイマーごとに名前・輸液量・終了時刻を設定
- リアルタイムでカウントダウン表示

#### プッシュ通知
- **5分前通知**: 点滴終了5分前にアラート
- **終了通知**: 点滴終了時に通知
- **通知内容**: タイマー名・輸液量を表示

#### 通知の特徴
- **Web Notifications API**: ブラウザのネイティブ通知
- **バックグラウンド動作**: アプリを開いていなくても通知
- **パーミッション管理**: 初回使用時に許可を求める

### 使い方
1. **通知許可**: 「通知を有効化」ボタンをクリック
2. **タイマー追加**: 「新しいタイマーを追加」から設定
3. **自動管理**: あとは自動で通知が届く

### 技術仕様
- **チェック間隔**: 10秒ごと
- **ストレージ**: localStorage (`drip-calc-timers`)
- **API**: Web Notifications API
- **互換性**: 最新のChrome, Firefox, Safari対応

---

## 📳 4. バイブレーション機能

### 概要
メトロノーム（滴下リズム）に合わせてスマートフォンを振動させるモードを追加。

### 用途
- **音が出せない環境**: 深夜や静かな病室
- **視覚・触覚の併用**: 音声ガイドと組み合わせて精度向上
- **スマホをポケットに入れたまま**: 触覚だけで確認可能

### 機能詳細
- **振動パターン**: 50msの短い振動
- **同期**: メトロノームの音声と完全同期
- **ON/OFF切替**: バイブレーションボタンで簡単切り替え

### 技術仕様
- **API**: `navigator.vibrate(50)`
- **対応**: Android、iOS（一部制限あり）
- **自動検出**: 対応デバイスのみボタン表示

### 使い方
1. メトロノームセクションの右上にバイブレーションボタンが表示
2. タップでON/OFF切り替え
3. ONの状態でメトロノームを開始すると、リズムに合わせて振動

---

## 🔧 技術的改善点

### パフォーマンス
- **React最適化**: useCallback/useMemo を適切に使用
- **レンダリング効率**: 不要な再レンダリングを削減
- **軽量化**: 依存パッケージの最小化

### アクセシビリティ
- **aria-label**: すべてのボタンに適切な説明
- **キーボード操作**: Tab/Enterでの操作に対応
- **コントラスト**: WCAG AAレベルのコントラスト比を確保

### コード品質
- **TypeScript**: 厳格な型チェック
- **ESLint**: すべてのエラーを解消
- **コンポーネント分離**: 保守性の高い設計

---

## 📱 PWA対応の強化

### アップデート内容
- **manifest.json**: Ver.2.0に対応
- **アプリ名**: 「点滴計算機」
- **テーマカラー**: サクラピンク (#FDE2E4)
- **背景色**: グレージュ (#F9F8F6)

### インストール後の体験
- ネイティブアプリのような操作感
- オフラインでも計算機能は動作
- ホーム画面から即起動

---

## 🛡️ 信頼性の維持

### 医療用語の正確性
- **総輸液量**: 医療現場で使用される正式な用語
- **滴下セット**: 実際の医療機器の呼称
- **滴/分**: 日本の医療標準の単位表記

### 免責事項の継続
- 初回起動時に必ず表示
- 「承諾して利用を開始する」ボタンで明示的な同意
- localStorage で同意状態を保存
- デザインを刷新しつつ、内容は変更なし

---

## 📊 新コンポーネント一覧

### 1. PresetManager.tsx
- プリセット保存・読み込み機能
- 最大5件まで保存可能
- 削除機能付き

### 2. MultiTimer.tsx
- 複数タイマー管理
- Web Notifications API統合
- リアルタイムカウントダウン

### 3. Metronome.tsx (拡張)
- バイブレーション機能追加
- 音声・バイブの個別ON/OFF
- デザイン刷新（パステルカラー）

### 4. Calculator.tsx (刷新)
- 全体デザイン更新
- 新コンポーネント統合
- Ver.2.0バッジ追加

### 5. DisclaimerModal.tsx (刷新)
- パステルデザイン適用
- より目立つ配色
- 読みやすさ向上

---

## 🎯 使用シーン

### シーン1: 日常業務
1. よく使う設定をプリセットに保存
2. ワンタップで設定を呼び出し
3. 計算結果を確認
4. メトロノームで滴下リズムを確認

### シーン2: 複数患者管理
1. 患者ごとにタイマーを設定
2. マルチタイマーで一括管理
3. 5分前通知で準備開始
4. 終了通知で確認・記録

### シーン3: 夜勤帯
1. 音声をOFF、バイブレーションをON
2. メトロノームを開始
3. スマホをポケットに入れて作業
4. 振動で滴下リズムを確認

---

## 🚀 デプロイ方法

### ローカルビルド
```bash
npm install
npm run build
```

### GitHubへプッシュ
```bash
git add .
git commit -m "feat: Release Ver.2.0 - Major upgrade with pastel design and advanced features

- Add pastel color scheme (Greige, Sakura Pink, Mint Green)
- Implement MyPreset feature for saving/loading calculations
- Add MultiTimer with Web Notifications API
- Add vibration support to Metronome
- Update all components with rounded-3xl design
- Add Noto Sans JP font
- Update version badge to 2.0"

git push origin main
```

### Vercel自動デプロイ
プッシュ後、Vercelが自動的にデプロイを開始します。

---

## ✅ テスト項目

### 基本機能
- [ ] 計算が正しく動作する
- [ ] メトロノームが正確に動作する
- [ ] バイブレーションが同期している
- [ ] プリセットの保存・読み込みができる
- [ ] マルチタイマーが動作する
- [ ] 通知が5分前・終了時に届く

### デザイン
- [ ] パステルカラーが正しく表示される
- [ ] すべての角が丸い (rounded-3xl)
- [ ] グラデーションが美しく表示される
- [ ] Noto Sans JPフォントが適用されている
- [ ] モバイルでレスポンシブに動作する

### PWA
- [ ] iOSでインストールできる
- [ ] Androidでインストールできる
- [ ] オフラインで動作する
- [ ] ホーム画面アイコンが表示される

---

## 📞 サポート

### お問い合わせ
- **開発元**: R.Y. Group
- **バージョン**: 2.0 Official Release
- **リリース日**: 2026年2月

### フィードバック
アプリの改善提案やバグ報告は、GitHubのIssuesまでお願いします。

---

## 🎊 謝辞

Ver.2.0のリリースにあたり、医療現場の皆様からのフィードバックに深く感謝いたします。今後も、より使いやすく、より正確なツールを目指して開発を続けてまいります。

---

**点滴計算機 Ver.2.0 - R.Y. Group 公式リリース**
**©2026 R.Y. Group. All rights reserved.**
